<!DOCTYPE html>
<html>
  
   <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

{{ header|safe }}

<div class="container">
  
    <div class="row">
        <!--center the text-->
        <div class="col">
            <h1 class="text-center">Step 1: Read the Article</h1>
            <br><br>
        </div>
    </div>
    <div class="row">
        <!--make the background here light grey-->
        <div class="col-8" style="background-color: #f8f9fa;">
            <h2>{{title}}</h2>
            <!-- article contents here-->
            {% for paragraph in paragraphs %}
                <p id="{{paragraph.tag}}"">{{paragraph.text | safe}}</p>
            {% endfor %}
        </div>
        <!--make the background dark grey and all the text off-white-->
        <div class="col-4" style="background-color: #343a40; color: #f8f9fa;">
            <!-- word list here-->
            <h3>Vocabulary</h3>
            <br>
            <span id="wordlist"></span>
        </div>
    </div>
    <div class="row">
        <!--center the text-->
        <div class="col">
            <div class="d-grid gap-2">
                <br><br>
                <button class="btn btn-primary" type="button" onclick="submit_vocabulary()">Review Vocabulary</button>
                <br><br>
            </div>
        </div>
    </div>
</div>

<script>

    //Create a global variable to store the vocabulary words and sentences
    var vocabulary = [];

    //Create the submit_vocabulary function
    function submit_vocabulary() {
        //Create a form element
        var form = document.createElement("form");
        form.setAttribute("method", "POST");
        form.setAttribute("action", "/daily_article/step2/");
        //Create a hidden input element
        var hiddenField = document.createElement("input");
        hiddenField.setAttribute("type", "hidden");
        hiddenField.setAttribute("name", "vocabulary");
        hiddenField.setAttribute("value", JSON.stringify(vocabulary));
        //Append the hidden input element to the form
        form.appendChild(hiddenField);
        //Append the form to the body
        document.body.appendChild(form);
        //Submit the form
        form.submit();
    }


    {% for item in w2s_map %}
        //Create an event listener for a span object with id "w1"
        document.getElementById("{{item.word}}").addEventListener("click", function() {
            //Get the value 
            var word_value = document.getElementById("{{item.word}}").innerText;
            //Add the word to the word list
            var wordlist = document.getElementById("wordlist");
            var word = document.createElement("span");
            word.innerHTML = word_value + "<br>";
            wordlist.appendChild(word);
            //Get the sentence value
            var sentence_value = document.getElementById("{{item.sentence}}").innerText;
            //Add the word and sentence to the vocabulary list
            vocabulary.push({word: word_value, sentence: sentence_value});
        });
    {% endfor %}

</script>
    

  </body>
</html>

